webpackJsonp([2],{0:function(t,e){},1:function(t,e){},2:function(t,e){},3:function(t,e){},"4+9E":function(t,e){},"5wuD":function(t,e){},"8hg6":function(t,e){},AbMv:function(t,e){},Hsum:function(t,e){},Lc99:function(t,e){},LwDk:function(t,e){},MbFM:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("plwb")},null,null).exports,o=s("/ocq"),l=s("PJh5"),r=s.n(l),c={name:"Navigation",props:["title","view","history","uid"],data:()=>({u:at}),methods:{goBack:function(t){window.history.length>1&&"/"!=t?this.$router.go(-1):this.$router.push(t)}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"nav-bar"}},[s("div",{attrs:{id:"nav-container"}},[s("div",{attrs:{id:"nav-left"}},[t.history?s("div",{staticClass:"cursor",on:{click:function(e){t.goBack(t.history)}}},[s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"chevron-left"}})],1):s("div",{staticClass:"logo"},[t._v(" ")])]),t._v(" "),s("div",{attrs:{id:"nav-center"}},[s("div",{staticClass:"nav-center-text",domProps:{innerHTML:t._s(t.title)}})]),t._v(" "),s("div",{attrs:{id:"nav-right"}},["front"==t.view?s("div",[t.u.data.uid?s("div",{staticClass:"profile",on:{click:function(e){t.$router.push("/u")}}},[t._v(" "),s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"user-circle"}})],1):s("div",{staticClass:"button",on:{click:function(e){t.$router.push("/u")}}},[t._v("SIGN IN")])]):t._e()])])])},staticRenderFns:[]};var u=s("VU/8")(c,d,!1,function(t){s("PTkZ")},"data-v-ff611938",null).exports,m={name:"GalleryList",components:{Navigation:u},created:function(){document.title="iDEW Galleries"},data:()=>({galleries:[],u:at,orderedGalleries:[]}),methods:{lastPostTime:function(t){return r()(t).isValid()?r()(t).fromNow():"-"}},watch:{galleries:function(){this.orderedGalleries=this.galleries.slice().sort((t,e)=>"Showcase"==t.title?-1:1)}},firestore:()=>({galleries:tt.collection("galleries").where("public","==",!0).orderBy("timestamp","desc")})},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Navigation",{attrs:{title:"Galleries",view:"front"}}),t._v(" "),s("div",{staticClass:"page-container"},[s("div",{staticClass:"page"},[t._m(0),t._v(" "),t.u.data.uid?t.u.classes.length<1&&t.u.companies.length<1?s("div",[s("h3",{staticStyle:{"font-weight":"300"}},[t._v("Browse student galleries below. We noticed you are signed in but not part of a group. If you have a code to join a group, go to "),s("strong",[s("a",{on:{click:function(e){t.$router.push("/u")}}},[t._v("your profile page")])]),t._v(" to enter your code.")])]):s("div",[s("h3",{staticStyle:{"font-weight":"300"}},[t._v("Browse student galleries below. ")])]):s("div",[s("h3",{staticStyle:{"font-weight":"300"}},[t._v("Browse student galleries below, or if you have a code to join a group, "),s("strong",[s("a",{on:{click:function(e){t.$router.push("/u")}}},[t._v("sign in")])]),t._v(" to continue.")])]),t._v(" "),s("br"),t._v(" "),s("hr"),t._v(" "),t.u.data.uid?s("div",[t.u.classes.length>0?s("div",[s("h2",[t._v("Your Class"),t.u.classes.length>1?s("span",[t._v("es")]):t._e()]),t._v(" "),t._l(t.u.classes,function(e,a){return s("div",{staticClass:"class-listing",on:{click:function(s){t.$router.push("/g/"+e.id)}}},[t._v(t._s(e.name)+"\n                    ")])})],2):t._e()]):t._e(),t._v(" "),t.galleries.length?s("div",[s("h2",[t._v("Public Galleries")]),t._v(" "),t._l(t.orderedGalleries,function(e,a){return s("div",{key:a,class:"gallery-listing cursor "+e.status,on:{click:function(s){t.$router.push("/g/"+e.slug)}}},[s("h2",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),e.postCount&&e.latestPostTimestamp&&e.status?s("div",[s("div",{staticClass:"metric",domProps:{innerHTML:t._s("Posts | "+e.postCount)}}),t._v(" "),s("div",{staticClass:"metric"},[t._v("Latest | "+t._s(t.lastPostTime(e.latestPostTimestamp.toDate())))]),t._v(" "),s("div",{staticClass:"metric",domProps:{innerHTML:t._s("Status | "+e.status)}})]):t._e()])})],2):t._e()])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[this._v("Let us show you"),e("br"),this._v("what we have done.")])}]};var v=s("VU/8")(m,p,!1,function(t){s("uORo")},"data-v-211fedba",null).exports,h={name:"PostList",props:["id","slug","cname"],data(){return{posts:[],sortedPosts:[],classes:[],clss:this.cname?this.cname:"",old:!1,utils:it}},watch:{posts:function(t){this.sortedPosts=t.slice().sort(function(t,e){return t.award||e.award?t.award?e.award?t.award.localeCompare(e.award):-1:1:0});var e=t.filter(t=>t.classname).map(t=>t.classname);this.classes=[...new Set(e)],this.classes.sort(),this.$emit("post-count",t.length)},clss:function(t){t?this.$router.replace(`/g/${this.slug}/c/${t}`):this.$router.replace(`/g/${this.slug}/`)}},methods:{getFilteredPosts:function(t){return t?this.sortedPosts.filter(e=>this.utils.slugify(e.classname)==t):this.sortedPosts}},firestore(){return{posts:tt.collection("posts").where("gid","==",this.id).orderBy("timestamp","desc")}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.classes.length>1?s("select",{directives:[{name:"model",rawName:"v-model",value:t.clss,expression:"clss"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.clss=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("All Classes")]),t._v(" "),t._l(t.classes,function(e){return s("option",{domProps:{value:t.utils.slugify(e)}},[t._v("\n            "+t._s(e)+"\n        ")])})],2):t._e(),t._v(" "),t.old?t._e():s("div",{attrs:{id:"post-list"}},[t._l(t.getFilteredPosts(t.clss),function(e,a){return s("div",{key:a,staticClass:"cursor post-card",on:{click:function(s){t.$router.push("/p/"+e.gslug+"/"+e.id)}}},[e.data.thumbnail?s("div",{staticClass:"thumbnail",style:{backgroundImage:"url('"+e.data.thumbnail+"')"}}):s("div",{staticClass:"thumbnail"},[e.data.text?s("div",{domProps:{innerHTML:t._s(e.data.text)}}):t._e()]),t._v(" "),s("div",{staticClass:"post-card-subtitle",domProps:{innerHTML:t._s(e.classname?e.classname:"&nbsp;")}}),t._v(" "),s("div",{staticClass:"post-card-title",domProps:{innerHTML:t._s(e.data.title?e.data.title:"Untitled")}}),t._v(" "),s("div",[e.data.pdf?s("span",{staticClass:"attachment-button"},[s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"file-pdf"}}),t._v(" PDF")],1):t._e(),t._v(" "),e.data.link?s("span",{staticClass:"attachment-button"},[s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"link"}}),t._v(" Link")],1):t._e(),t._v(" "),e.data.image?s("span",{staticClass:"attachment-button"},[s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"image"}}),t._v(" Image")],1):t._e(),t._v(" "),e.data.text?s("span",{staticClass:"attachment-button"},[s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"font"}}),t._v(" Text")],1):t._e()]),t._v(" "),e.award?s("div",{staticClass:"award"},[s("font-awesome-icon",{attrs:{icon:"award"}}),t._v(" "+t._s(e.award))],1):t._e()])}),t._v(" "),0==t.getFilteredPosts(t.clss).length?s("div",[t._v("No posts yet. Check back later.")]):t._e()],2)])},staticRenderFns:[]};var f={name:"Gallery",components:{Navigation:u,PostList:s("VU/8")(h,g,!1,function(t){s("SODp")},"data-v-10cd4c16",null).exports},created:function(){document.title="Gallery"},data:()=>({galleries:[{}],u:at,postCount:null,gallery:{}}),watch:{galleries:function(){this.gallery=this.galleries[0]}},methods:{gotoAddPost:function(){this.$router.push(`/np/${this.$route.params.slug}`)},updatePostCount(t){this.postCount=t}},firestore(){return{galleries:tt.collection("galleries").where("slug","==",this.$route.params.slug).limit(1)}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Navigation",{attrs:{title:"Gallery Detail",history:"/"}}),t._v(" "),t.gallery?s("div",{staticClass:"page-container"},[s("div",{staticClass:"page"},[s("h1",{attrs:{id:"gallery-title"},domProps:{innerHTML:t._s(t.gallery.title)}}),t._v(" "),t.gallery.prompt?s("div",{attrs:{id:"gallery-prompt"},domProps:{innerHTML:t._s(t.gallery.prompt)}}):t._e(),t._v(" "),t.gallery.commentCompanyCount?s("div",{staticClass:"company-data"},[s("strong",[t._v("Feedback Contributors")]),s("br"),t._l(t.gallery.commentCompanyCount,function(e,a){return s("div",[t._v(t._s(e.name)+" -  "+t._s(e.count))])})],2):t._e(),t._v(" "),t.u.data.uid&&"open"==t.gallery.status&&t.u.classes.length>0?s("div",{staticClass:"button button-highlight",on:{click:t.gotoAddPost}},[t._v("Add Post")]):t._e(),t._v(" "),t.gallery.id?s("PostList",{attrs:{id:t.gallery.id,slug:t.gallery.slug,cname:this.$route.params.cname},on:{"post-count":t.updatePostCount}}):t._e()],1)]):t._e()],1)},staticRenderFns:[]};var C=s("VU/8")(f,_,!1,function(t){s("MbFM")},"data-v-15116b3d",null).exports,y={name:"User",created:function(){document.title="User Profile"},methods:{leave:function(t,e,s){1==confirm(`You are about to leave ${s}.`)&&tt.collection(t).doc(e).delete()},join:function(t){var e=t.target.value,s=this;tt.collection("studentCodes").doc(e).get().then(function(t){if(t.data()){var a={};a.class=t.data().classid,a.classid=t.data().classid,a.uid=s.u.data.uid,a.role="student",a.uname=s.u.data.displayName,a.email=s.u.data.email,a.timestamp=et.FieldValue.serverTimestamp(),s.u.classes.filter(e=>e.id==t.data().classid).length?alert("You are already in that class."):tt.collection("joins").add(a).then(e=>void t.data().classid)}else tt.collection("teacherCodes").doc(e).get().then(function(t){if(t.data()){var a={};a.class=t.data().classid,a.classid=t.data().classid,a.uid=s.u.data.uid,a.role="teacher",a.uname=s.u.data.displayName,a.email=s.u.data.email,a.timestamp=et.FieldValue.serverTimestamp(),s.u.classes.filter(e=>e.id==t.data().classid).length?alert("You are already in that class."):tt.collection("joins").add(a).then(e=>void t.data().classid)}else tt.collection("companyCodes").doc(e).get().then(function(t){if(t.data()){var e={};e.companyID=t.data().companyID,e.uid=s.u.data.uid,e.role="member",e.uname=s.u.data.displayName,e.email=s.u.data.email,e.timestamp=et.FieldValue.serverTimestamp(),tt.collection("companyJoins").doc(s.u.data.uid).set(e).then(e=>void t.data().companyID)}else alert("Code not found.")}).catch(function(t){console.log("Error getting documents: ",t)})}).catch(function(t){console.log("Error getting documents: ",t)})}).catch(function(t){console.log("Error getting documents: ",t)}),t.target.value=""}},data:()=>({u:at})},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-container"},[t.u.data?s("div",{staticClass:"page"},[s("div",{staticClass:"close"},[s("span",{on:{click:function(e){t.$router.push("/")}}},[t._v("X")])]),t._v(" "),s("h1",[t._v(t._s(t.u.data.displayName?t.u.data.displayName:"Guest"))]),t._v(" "),s("h5",[t._v(t._s(t.u.data.email?t.u.data.email:""))]),t._v(" "),t.u.data.uid?s("div",{staticClass:"button",on:{click:function(e){t.u.signOut()}}},[s("font-awesome-icon",{attrs:{icon:"sign-out-alt"}}),t._v(" Sign Out")],1):s("div",{staticClass:"button",on:{click:function(e){t.u.signIn()}}},[t._v("Sign In with Google")]),t._v(" "),t.u.data.uid?s("div",[s("br"),t._v(" "),s("div",[t._v("Have a code? Enter it here.")]),t._v(" "),s("input",{attrs:{placeholder:"Code"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.join(e):null}}}),t._v(" "),s("hr"),t._v(" "),t.u.companies.length>0?s("div",[s("h2",[t._v("Your Groups")]),t._v(" "),t._l(t.u.companies,function(e,a){return s("div",{staticClass:"post-list"},[s("div",[s("strong",[t._v(t._s(e.name))])]),t._v(" "),s("div",{staticClass:"button button-dark",on:{click:function(s){t.leave("companyJoins",e.jid,e.name)}}},[s("font-awesome-icon",{attrs:{icon:"sign-out-alt"}}),t._v(" Leave Group")],1)])}),t._v(" "),s("hr")],2):t._e(),t._v(" "),t.u.classes.length>0?s("div",[s("h2",[t._v("Your Classes")]),t._v(" "),t._l(t.u.classes,function(e,a){return s("div",{staticClass:"post-list"},[s("div",[s("strong",[t._v(t._s(e.name)+" "),s("i",[t._v("as "+t._s(e.role))])])]),t._v(" "),s("div",{staticClass:"button button-dark",on:{click:function(s){t.leave("joins",e.jid,e.name)}}},[s("font-awesome-icon",{attrs:{icon:"sign-out-alt"}}),t._v(" Leave Class")],1),t._v(" "),"teacher"==e.role?s("span",[s("div",{staticClass:"button",on:{click:function(s){t.$router.push("/roster/"+e.id)}}},[t._v("View Roster")]),t._v(" "),s("div",{staticClass:"button",on:{click:function(s){t.$router.push("/code/"+e.id)}}},[t._v("Display Student Code")])]):t._e()])}),t._v(" "),s("hr")],2):t._e(),t._v(" "),t.u.posts.length>0?s("div",[s("h2",[t._v("Your Posts")]),t._v(" "),t._l(t.u.posts,function(e,a){return s("div",{staticClass:"post-list",on:{click:function(s){t.$router.push("/p/"+e.gslug+"/"+e.id)}}},[t._v(t._s(e.data.title)+" >>\n                    ")])}),t._v(" "),s("hr")],2):t._e(),t._v(" "),t.u.comments.length>0?s("div",[s("h2",[t._v("Your Comments")]),t._v(" "),t._l(t.u.comments,function(e,a){return s("div",{staticClass:"post-list",on:{click:function(s){t.$router.push("/p/"+e.gslug+"/"+e.pid)}}},[s("div",[t._v("Comment: "+t._s(e.data)+" >>")])])})],2):t._e()]):t._e()]):t._e()])])},staticRenderFns:[]};var w=s("VU/8")(y,b,!1,function(t){s("4+9E")},"data-v-78471b39",null).exports,j={name:"CommentList",props:["pid","puid","cid","gid"],data:()=>({comments:[],u:at,galleryComments:[]}),computed:{isTeacher:function(){if(at.classes){var t=at.classes.findIndex(t=>t.id==this.cid);return t>-1&&"teacher"==at.classes[t].role}return!1}},methods:{deleteComment:function(t){1==confirm("This will forever remove this comment!")&&tt.collection("comments").doc(t).delete().then(()=>{}).catch(t=>{alert(t)})},setApprove:function(t,e){tt.collection("comments").doc(t).update({approved:e})}},watch:{galleryComments:function(){if(this.isTeacher){var t=[...new Set(this.galleryComments.map(t=>t.companyid))].map(t=>({name:this.galleryComments.find(e=>e.companyid==t).companyname,count:this.galleryComments.filter(e=>e.companyid==t).length}));console.log(t),tt.collection("galleries").doc(this.gid).update({commentCount:this.galleryComments.length,commentCompanyCount:t})}}},firestore(){return{comments:this.isTeacher?tt.collection("comments").where("pid","==",this.pid).orderBy("timestamp","desc"):this.puid==this.u.data.uid?tt.collection("comments").where("pid","==",this.pid).where("approved","==",!0).orderBy("timestamp","desc"):tt.collection("comments").where("pid","==",this.pid).where("uid","==",this.u.data.uid).orderBy("timestamp","desc"),galleryComments:this.isTeacher?tt.collection("comments").where("gid","==",this.gid).where("approved","==",!0):tt.collection("comments").where("pid","==",this.pid).where("uid","==",this.u.data.uid)}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("hr"),t._v(" "),t.comments.length>0?s("h2",[t._v("Comments")]):t._e(),t._v(" "),t._l(t.comments,function(e,a){return s("div",[e.companyname?s("div",[t._v("Member of "+t._s(e.companyname))]):t._e(),t._v(" "),s("div",[s("strong",[t._v(t._s(e.data))])]),t._v(" "),t.isTeacher?s("div",{staticClass:"button",on:{click:function(s){t.setApprove(e.id,!e.approved)}}},[t._v(t._s(e.approved?"Approved (Click to Undo)":"Not Approved (Click to Approve)"))]):t._e(),t._v(" "),t.isTeacher||e.uid==t.u.data.uid?s("div",{staticClass:"button",on:{click:function(s){t.deleteComment(e.id)}}},[t._v("Delete")]):t._e()])})],2)},staticRenderFns:[]};var P={name:"Post",components:{Navigation:u,CommentList:s("VU/8")(j,k,!1,function(t){s("Hsum")},"data-v-46d8789b",null).exports},data:()=>({post:{},u:at,galleries:[{}],posts:[{}],gallery:{}}),created:function(){document.title="Post"},computed:{isEditor:function(){var t=this.u.data.uid==this.post.uid,e=this.u.classes.find(t=>t.id==this.post.classid);return e&&(t=t||"teacher"==e.role),t},isTeacher:function(){var t=!1,e=this.u.classes.find(t=>t.id==this.post.classid);return e&&(t="teacher"==e.role),t},isPro:function(){return this.u.companies.length>0}},watch:{galleries:function(){this.gallery=this.galleries.length>0?this.galleries[0]:{}}},methods:{updateAward:function(){tt.collection("posts").doc(this.post.id).update({award:this.$refs.award.value})},postComment:function(){var t=this,e={classid:this.post.classid,classname:this.post.classname,companyname:this.u.companies.length>0?this.u.companies[0].name:null,companyid:this.u.companies.length>0?this.u.companies[0].id:null,pid:this.post.id,gid:this.gallery.id,data:this.$refs.commentText.value,uid:this.u.data.uid,gtitle:this.gallery.title,cprompt:this.gallery.commentPrompt,gslug:this.gallery.slug,timestamp:et.FieldValue.serverTimestamp()};tt.collection("comments").add(e).then(function(e){t.$refs.commentText.value=""}).catch(function(t){alert("Error adding document: "+t)})},deletePost:function(){var t=this;1==confirm("This will forever remove this post!")&&tt.collection("posts").doc(this.post.id).delete().then(()=>{tt.collection("galleries").doc(t.gallery.id).update({postCount:t.posts.length,latestPostTimestamp:et.FieldValue.serverTimestamp()}).then(function(){console.log("Gallery metadata updated")}).catch(function(t){console.log("error updating postcount or latestPostTimestamp",t)}),this.$router.replace(`/g/${this.$route.params.gslug}`)}).catch(t=>{alert(t)})}},firestore(){return{post:tt.collection("posts").doc(this.$route.params.pid),posts:tt.collection("posts").where("gslug","==",this.$route.params.gslug).orderBy("timestamp","desc"),galleries:tt.collection("galleries").where("slug","==",this.$route.params.gslug).limit(1)}}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Navigation",{attrs:{title:"Post Detail",view:"post",uid:t.post.uid,history:"/g/"+this.$route.params.gslug}}),t._v(" "),s("div",{staticClass:"page-container"},[t.post.data?s("div",{staticClass:"page"},[s("h1",{staticClass:"post-title",domProps:{innerHTML:t._s(t.post.data.title)}}),t._v(" "),s("h4",{staticClass:"post-meta"},[s("div",[t._v("Gallery "),s("strong",[t._v(" "+t._s(t.post.gtitle))])]),t._v(" "),s("div",[t._v("Class "),s("strong",[t._v(" "+t._s(t.post.classname))])]),t._v(" "),t.post.award?s("div",{staticClass:"award"},[t._v("Award "),s("strong",[t._v(" "+t._s(t.post.award))])]):t._e()]),t._v(" "),s("div",{staticClass:"post-artifacts"},[t.post.data.image?s("div",{staticClass:"post-artifact"},[s("a",{staticClass:"link-button",attrs:{target:"_blank",href:t.post.data.image}},[s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"external-link-alt"}})],1),t._v(" "),s("img",{staticClass:"post-img",attrs:{src:t.post.data.image}})]):t._e(),t._v(" "),t.post.data.text?s("div",{staticClass:"post-artifact"},[s("div",{staticClass:"post-txt"},[t._v(t._s(t.post.data.text))])]):t._e(),t._v(" "),t.post.data.link?s("div",{staticClass:"post-artifact"},[s("a",{staticClass:"link-button",attrs:{target:"_blank",href:t.post.data.link}},[s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"external-link-alt"}})],1),t._v(" "),t.post.data.link.indexOf("repl")>-1?s("div",{staticClass:"big-iframe-holder"},[s("iframe",{staticClass:"big-frame ",attrs:{frameborder:"no",src:t.post.data.link}})]):s("div",{staticClass:"post-txt"},[s("a",{attrs:{href:t.post.data.link,target:"_blank"}},[t._v(t._s(t.post.data.link))])])]):t._e(),t._v(" "),t.post.data.pdf?s("div",{staticClass:"post-artifact"},[s("a",{staticClass:"link-button",attrs:{target:"_blank",href:t.post.data.pdf}},[s("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"external-link-alt"}})],1),t._v(" "),s("div",{staticClass:"big-iframe-holder"},[s("iframe",{staticClass:"big-frame ",attrs:{frameborder:"no",src:t.post.data.pdf}})])]):t._e()]),t._v(" "),t.u.data.uid?s("div",[t.isEditor?s("div",{staticClass:"button",on:{click:function(e){t.deletePost()}}},[t._v("Delete Post")]):t._e(),t._v(" "),t.isTeacher?s("div",[s("input",{ref:"award",attrs:{placeholder:"Award description..."},domProps:{value:t.post.award}}),t._v(" "),s("div",{staticClass:"button",on:{click:function(e){t.updateAward()}}},[t._v("Update Award")])]):t._e(),t._v(" "),(t.isPro||t.isTeacher)&&t.gallery.commentPrompt?s("div",[s("h2",[t.u.companies.length>0?s("small",[t._v("As a Member of "+t._s(t.u.companies[0].name))]):t._e(),s("br"),t._v("Provide Feedback")]),t._v(" "),t.gallery.commentPrompt?s("p",[t._v(t._s(t.gallery.commentPrompt))]):t._e(),t._v(" "),s("textarea",{ref:"commentText",attrs:{rows:"4",cols:"50",placeholder:"Something good ... Something constructive"}}),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"button",on:{click:t.postComment}},[t._v("Post")])]):t._e(),t._v(" "),s("CommentList",{attrs:{pid:t.post.id,puid:t.post.uid,cid:t.post.classid,gid:t.post.gid}})],1):t._e()]):t._e()])],1)},staticRenderFns:[]};var $=s("VU/8")(P,T,!1,function(t){s("LwDk")},"data-v-946b6f1c",null).exports,x={name:"NewPost",components:{Navigation:u},data(){return{galleries:[{}],posts:[{}],u:at,submission:{title:null,text:null,image:null,link:null,pdf:null},gslug:this.$route.params.slug,text:void 0,utils:it}},created:function(){document.title="New Post"},computed:{clss:function(){var t=this.u.classes.filter(t=>t.id==this.galleries[0].id),e=t.length>0,s=this.galleries[0].public,a=this.u.classes[0];return e?t[0]:s&&a?a:void 0},gallery:function(){return this.galleries[0]}},methods:{add:function(t,e){["text","title","link"].indexOf(t)>-1?this.submission[t]="":this.utils.processFile(e.target.files[0]).then(e=>{this.submission[t]=e})},submit:function(t){t.target.setAttribute("style","pointer-events:none"),t.target.innerHTML="loading...",this.clss&&(null!=this.submission.pdf?this.storeFile("pdf").then(()=>{null!=this.submission.image?this.storeFile("image").then(()=>{this.firestorePost()}):this.firestorePost()}):null!=this.submission.image?this.storeFile("image").then(()=>{this.firestorePost()}):this.firestorePost())},storeFile:function(t){var e=this;return new Promise(function(s,a){delete e.submission[t].thumbnailSrc;var i="";if("image"==t){var n="."+e.submission.image.imageBlob.type.substring(e.submission.image.imageBlob.type.indexOf("/")+1);i=e.clss.name+"-"+e.utils.randomString(4)+n}else i=e.clss.name+"-"+e.utils.randomString(4)+".pdf";st.child("posts/"+i).put(e.submission[t][t+"Blob"]).then(a=>{a.ref.getDownloadURL().then(function(a){var n="."+e.submission[t][t+"Blob"].type.substring(e.submission[t][t+"Blob"].type.indexOf("/")+1),o="thumb-"+i.slice(0,-4)+n;st.child("posts/"+o).put(e.submission[t].thumbnailBlob).then(n=>{n.ref.getDownloadURL().then(function(n){e.submission.thumbnail=n,e.submission[t]=a,e.submission[t+"Name"]=i,e.submission.thumbnailName=o,s()})}).catch()})}).catch()})},firestorePost:function(){var t=this;tt.collection("posts").add({classid:this.clss.id,classname:this.clss.name,gid:this.gallery.id,data:this.submission,uid:this.u.data.uid,gtitle:this.gallery.title,gprompt:this.gallery.prompt?this.gallery.prompt:"",cprompt:this.gallery.commentPrompt?this.gallery.commentPrompt:"",gslug:this.gslug,timestamp:et.FieldValue.serverTimestamp()}).then(function(e){t.$router.push(`/g/${t.gslug}`),tt.collection("galleries").doc(t.galleries[0].id).update({postCount:t.posts.length,latestPostTimestamp:et.FieldValue.serverTimestamp()}).then(function(){console.log("Gallery metadata updated")}).catch(function(t){console.log("error updating postcount or latestPostTimestamp",t)})}).catch(function(t){alert("Error adding document: "+t)})},updateSub:function(t,e){this.submission[t]=e.target.value}},firestore(){return{galleries:tt.collection("galleries").where("slug","==",this.$route.params.slug).limit(1),posts:tt.collection("posts").where("gslug","==",this.$route.params.slug).orderBy("timestamp","desc")}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Navigation",{attrs:{title:"New Post",history:"`/g/${gslug}`"}}),t._v(" "),s("div",{staticClass:"page-container"},[t.u.data.uid&&t.galleries[0]?s("div",{staticClass:"page"},[s("h1",{domProps:{innerHTML:t._s(t.galleries[0].title)}}),t._v(" "),s("h3",{domProps:{innerHTML:t._s(t.galleries[0].prompt)}}),t._v(" "),s("div",[t._v("Title")]),t._v(" "),s("input",{on:{input:function(e){t.updateSub("title",e)}}}),s("br"),t._v(" "),null==t.submission.text?s("span",{staticClass:"button",on:{click:function(e){t.add("text")}}},[t._v("Add Text")]):t._e(),t._v(" "),null==t.submission.image?s("span",{staticClass:"button"},[t._v("Add Image"),s("input",{staticClass:"button",attrs:{type:"file",accept:"image/*",id:"add-file"},on:{change:function(e){t.add("image",e)}}})]):t._e(),t._v(" "),null==t.submission.pdf?s("span",{staticClass:"button"},[t._v("Add PDF"),s("input",{staticClass:"button",attrs:{type:"file",accept:"application/pdf",id:"add-file"},on:{change:function(e){t.add("pdf",e)}}})]):t._e(),t._v(" "),null==t.submission.link?s("span",{staticClass:"button",on:{click:function(e){t.add("link")}}},[t._v("Add Link")]):t._e(),t._v(" "),s("br"),t._v(" "),null!=t.submission.text?s("textarea",{attrs:{placeholder:"Enter your text here."},on:{input:function(e){t.updateSub("text",e)}}}):t._e(),t._v(" "),null!=t.submission.link?s("input",{attrs:{placeholder:"Enter your link here."},on:{input:function(e){t.updateSub("link",e)}}}):t._e(),t._v(" "),null!=t.submission.pdf?s("img",{attrs:{src:t.submission.pdf.thumbnailSrc,width:"200"}}):t._e(),t._v(" "),null!=t.submission.image?s("img",{attrs:{src:t.submission.image.thumbnailSrc,width:"200"}}):t._e(),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"button button-highlight",on:{click:t.submit}},[t._v("Submit")]),t._v(" "),s("div",{staticClass:"button",on:{click:function(e){t.$router.push("/g/"+t.gslug)}}},[t._v("Cancel")])]):t._e()])],1)},staticRenderFns:[]};var A=s("VU/8")(x,F,!1,function(t){s("AbMv")},"data-v-8fbcddba",null).exports,E={name:"Gallery",data(){return{u:at,slug:this.$route.params.slug?this.$route.params.slug:null,gid:"",gallery:{},original:{},ready:!1}},created:function(){document.title="Manage Galleries"},methods:{updateItem:function(t,e){this.gallery[t]="public"==t?e.target.checked:e.target.value,console.log(this.gallery)},deleteGallery:function(t){1==confirm("You will now forever delete this gallery!")&&(t.target.setAttribute("style","pointer-events:none"),t.target.innerHTML="deleting...",this.gid&&(it.deleteGallery(this.gid),this.$router.push("/")))},saveGallery:function(t,e){e.target.setAttribute("style","pointer-events:none"),e.target.innerHTML="saving...","create"==t?this.createGallery(this.gallery):this.updateGallery(this.gallery)},createGallery:function(t){this.gallery.slug||(this.gallery.slug=it.randomString(6)),this.gallery.public=!0,it.addGallery(this.gallery),this.$router.push(`/g/${this.gallery.slug}`)},updateGallery:function(t){it.updateGallery(this.gallery,this.gid),this.$router.push(`/g/${this.gallery.slug}`)}},created:function(){it.getGallery(this.slug).then(t=>{this.gid=t.id?t.id:null;var e=["title","slug","prompt","status","commentPrompt"];for(var s in t)-1==e.indexOf(s)&&delete t[s];t.status||(t.status="open"),this.gallery=t,this.original=t,this.ready=!0})}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-container"},[s("div",{staticClass:"page"},[s("div",{staticClass:"close"},[s("span",{on:{click:function(e){t.$router.push("/")}}},[t._v("X")])]),t._v(" "),s("h1",[t._v("Admin Gallery")]),t._v(" "),t.u.data&&t.ready?s("div",[s("div",[t._v("Title")]),t._v(" "),s("input",{domProps:{value:t.gallery.title},on:{input:function(e){t.updateItem("title",e)}}}),t._v(" "),s("div",[t._v("Prompt")]),t._v(" "),s("textarea",{domProps:{value:t.gallery.prompt},on:{input:function(e){t.updateItem("prompt",e)}}}),t._v(" "),s("div",[t._v("Comment Prompt")]),t._v(" "),s("textarea",{domProps:{value:t.gallery.commentPrompt},on:{input:function(e){t.updateItem("commentPrompt",e)}}}),t._v(" "),s("div",[t._v("Status")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.gallery.status,expression:"gallery.status"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.gallery,"status",e.target.multiple?s:s[0])},function(e){t.updateItem("status",e)}]}},[s("option",{attrs:{value:"open",selected:""}},[t._v("Open")]),t._v(" "),s("option",{attrs:{value:"closed"}},[t._v("Closed")]),t._v(" "),s("option",{attrs:{value:"archived"}},[t._v("Archived")])]),t._v(" "),s("br"),t._v(" "),t.u.data&&t.slug?s("div",{staticClass:"button",on:{click:function(e){t.saveGallery("update",e)}}},[t._v("Update Gallery")]):t._e(),t._v(" "),t.u.data&&t.slug?s("div",{staticClass:"button",on:{click:function(e){t.deleteGallery(e)}}},[t._v("Delete Gallery")]):s("div",{staticClass:"button",on:{click:function(e){t.saveGallery("create",e)}}},[t._v("Create Gallery")])]):t._e()])])])},staticRenderFns:[]};var L=s("VU/8")(E,G,!1,function(t){s("tVsZ")},"data-v-69b569aa",null).exports,S={name:"GroupLists",data:()=>({newClass:{},newCompany:{},classes:[],classesPlus:[],companies:[],companiesPlus:[],studentCodes:[],teacherCodes:[],companyCodes:[]}),created:function(){document.title="Manage Groups"},methods:{copyDataArray:function(t){var e=[];return t.forEach(t=>{var s={id:t.id};Object.keys(t).forEach(e=>{s[e]=t[e]}),e.push(s)}),e},purgeOld:function(t){this.studentCodes.forEach(t=>{t.timestamp||tt.collection("studentCodes").doc(t.id).delete()}),this.teacherCodes.forEach(t=>{t.timestamp||tt.collection("teacherCodes").doc(t.id).delete()}),this.companyCodes.forEach(t=>{t.timestamp||tt.collection("companyCodes").doc(t.id).delete()})},purge:function(t){var e=this.copyDataArray(this.classes);this.studentCodes.forEach(t=>{"null"==t.id&&tt.collection("studentCodes").doc(t.id).delete();var s=e.findIndex(e=>e.id==t.classid);-1==s?tt.collection("studentCodes").doc(t.id).delete():e[s].studentCode?(tt.collection("studentCodes").doc(e[s].studentCode).delete(),e[s].studentCode=t.id):e[s].studentCode=t.id}),this.teacherCodes.forEach(t=>{"null"==t.id&&tt.collection("teacherCodes").doc(t.id).delete();var s=e.findIndex(e=>e.id==t.classid);-1==s?tt.collection("teacherCodes").doc(t.id).delete():e[s].teacherCode?(tt.collection("teacherCodes").doc(e[s].teacherCode).delete(),e[s].teacherCode=t.id):e[s].teacherCode=t.id});var s=this.copyDataArray(this.companies);this.companyCodes.forEach(t=>{"null"==t.id&&tt.collection("companyCodes").doc(t.id).delete();var e=s.findIndex(e=>e.id==t.companyID);-1==e?tt.collection("companyCodes").doc(t.id).delete():s[e].companyCode?(tt.collection("companyCodes").doc(s[e].companyCode).delete(),s[e].companyCode=t.id):s[e].companyCode=t.id})},processClasses:function(){var t=this.copyDataArray(this.classes);this.studentCodes.forEach(e=>{var s=t.findIndex(t=>t.id==e.classid);s>-1&&(t[s].studentCode=e.id)}),this.teacherCodes.forEach(e=>{var s=t.findIndex(t=>t.id==e.classid);s>-1&&(t[s].teacherCode=e.id)}),this.classesPlus=t.slice(0)},processCompanies:function(){var t=this.copyDataArray(this.companies);this.companyCodes.forEach(e=>{var s=t.findIndex(t=>t.id==e.companyID);s>-1&&(t[s].companyCode=e.id)}),this.companiesPlus=t.slice(0)},updateClass:function(t,e,s){var a=this,i=a.$refs.studentCode[e].value,n=a.$refs.teacherCode[e].value;s.target.setAttribute("style","pointer-events:none"),s.target.innerHTML="updating...",tt.collection("classes").doc(t).set({name:a.$refs.name[e].value,timestamp:et.FieldValue.serverTimestamp()}).then(function(){a.setClassCodes(t,i,n),s.target.setAttribute("style","pointer-events:auto"),s.target.innerHTML="Update Class"})},updateCompany:function(t,e,s){var a=this,i=a.$refs.companyCode[e].value;s.target.setAttribute("style","pointer-events:none"),s.target.innerHTML="updating...",tt.collection("companies").doc(t).set({name:a.$refs.cname[e].value,timestamp:et.FieldValue.serverTimestamp()}).then(function(){a.setCompanyCode(t,i),s.target.setAttribute("style","pointer-events:auto"),s.target.innerHTML="Update Company"})},addClass:function(t){var e={};e.name=this.$refs.newClassName.value,e.timestamp=et.FieldValue.serverTimestamp();var s,a=this.$refs.newClassTeacherCode.value,i=this.$refs.newClassStudentCode.value;t.target.setAttribute("style","pointer-events:none"),t.target.innerHTML="saving...",tt.collection("classes").add(e).then(e=>{var n=e.id;this.setClassCodes(n,i,a),s=this,t.target.setAttribute("style","pointer-events:auto"),t.target.innerHTML="Add Class",s.$refs.newClassName.value="",s.$refs.newClassTeacherCode.value="",s.$refs.newClassStudentCode.value=""})},addCompany:function(t){var e={};e.name=this.$refs.newCompanyName.value,e.timestamp=et.FieldValue.serverTimestamp();var s,a=this.$refs.newCompanyCode.value;t.target.setAttribute("style","pointer-events:none"),t.target.innerHTML="saving...",tt.collection("companies").add(e).then(e=>{var i=e.id;this.setCompanyCode(i,a),s=this,t.target.setAttribute("style","pointer-events:auto"),t.target.innerHTML="Add Company",s.$refs.newCompanyName.value="",s.$refs.newCompanyCode.value=""})},setCompanyCode:function(t,e){e&&tt.collection("companyCodes").doc(e).set({companyID:t,timestamp:et.FieldValue.serverTimestamp()}).then(function(){})},setClassCodes:function(t,e,s){e&&tt.collection("studentCodes").doc(e).set({classid:t,timestamp:et.FieldValue.serverTimestamp()}).then(function(){s&&tt.collection("teacherCodes").doc(s).set({classid:t,timestamp:et.FieldValue.serverTimestamp()}).then(function(){})})},deleteClass:function(t,e,s){1==confirm("This will forever delete this group and private gallaries, but will not remove the associated posts!")&&(s.target.setAttribute("style","pointer-events:none"),s.target.innerHTML="deleting...",t&&(console.log("deleting ",this.$refs.name[e].value),tt.collection("classes").doc(t).delete()))},deleteCompany:function(t,e,s){1==confirm("This will forever delete this group, but will not remove the associated comments!")&&(s.target.setAttribute("style","pointer-events:none"),s.target.innerHTML="deleting...",t&&(console.log("deleting"),tt.collection("companies").doc(t).delete()))}},watch:{classes:function(){this.processClasses()},studentCodes:function(){this.processClasses()},teacherCodes:function(){this.processClasses()},companies:function(){this.processCompanies()},companyCodes:function(){this.processCompanies()}},firestore:()=>({classes:tt.collection("classes").orderBy("name","asc"),companies:tt.collection("companies"),studentCodes:tt.collection("studentCodes").orderBy("timestamp","asc"),teacherCodes:tt.collection("teacherCodes").orderBy("timestamp","asc"),companyCodes:tt.collection("companyCodes").orderBy("timestamp","asc")})},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-container"},[s("div",{staticClass:"page"},[s("h1",[t._v("Admin Classes "),s("div",{staticClass:"button",on:{click:function(e){t.purge(e)}}},[t._v("Purge Stale Codes ("+t._s(t.studentCodes.length+t.teacherCodes.length+t.companyCodes.length)+")")])]),t._v(" "),s("h2",[t._v("Add a Class")]),t._v(" "),s("div",[s("div",[t._v("Name")]),t._v(" "),s("input",{ref:"newClassName"}),t._v(" "),s("div",[t._v("Student Code")]),t._v(" "),s("input",{ref:"newClassStudentCode"}),t._v(" "),s("div",[t._v("Teacher Code")]),t._v(" "),s("input",{ref:"newClassTeacherCode"}),t._v(" "),s("div",{staticClass:"button",on:{click:function(e){t.addClass(e)}}},[t._v("Add Class")]),t._v(" "),s("hr")]),t._v(" "),s("h2",[t._v("Current Classes")]),t._v(" "),t._l(t.classesPlus,function(e,a){return s("div",[s("div",[t._v("Name")]),t._v(" "),s("input",{ref:"name",refInFor:!0,domProps:{value:e.name}}),t._v(" "),s("div",[t._v("Student Code")]),t._v(" "),s("input",{ref:"studentCode",refInFor:!0,domProps:{value:e.studentCode}}),t._v(" "),s("div",[t._v("Teacher Code")]),t._v(" "),s("input",{ref:"teacherCode",refInFor:!0,domProps:{value:e.teacherCode}}),t._v(" "),s("div",{staticClass:"button",on:{click:function(s){t.updateClass(e.id,a,s)}}},[t._v("Update Class")]),t._v(" "),s("div",{staticClass:"button",on:{click:function(s){t.deleteClass(e.id,a,s)}}},[t._v("Delete Class")]),t._v(" "),s("div",[s("small",[t._v("ID: "+t._s(e.id))])]),t._v(" "),s("hr")])}),t._v(" "),s("h1",[t._v("Admin Companies")]),t._v(" "),s("h2",[t._v("Add a Company")]),t._v(" "),s("div",[s("div",[t._v("Name")]),t._v(" "),s("input",{ref:"newCompanyName"}),t._v(" "),s("div",[t._v("Company Code")]),t._v(" "),s("input",{ref:"newCompanyCode"}),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"button",on:{click:function(e){t.addCompany(e)}}},[t._v("Add Company")]),t._v(" "),s("hr")]),t._v(" "),s("h2",[t._v("Current Companies")]),t._v(" "),t._l(t.companiesPlus,function(e,a){return s("div",[s("div",[t._v("Name")]),t._v(" "),s("input",{ref:"cname",refInFor:!0,domProps:{value:e.name}}),t._v(" "),s("div",[t._v("Company Code")]),t._v(" "),s("input",{ref:"companyCode",refInFor:!0,domProps:{value:e.companyCode}}),t._v(" "),s("div",{staticClass:"button",on:{click:function(s){t.updateCompany(e.id,a,s)}}},[t._v("Update Company")]),t._v(" "),s("div",{staticClass:"button",on:{click:function(s){t.deleteCompany(e.id,a,s)}}},[t._v("Delete Company")]),t._v(" "),s("div",[s("small",[t._v("ID: "+t._s(e.id))])]),t._v(" "),s("hr")])})],2)])},staticRenderFns:[]};var D=s("VU/8")(S,N,!1,function(t){s("5wuD")},"data-v-49017466",null).exports,I={name:"Roster",created:function(){document.title="Roster"},methods:{remove:function(t){1==confirm("This will remove this student from this class!")&&tt.collection("joins").doc(t).delete().then(()=>{}).catch(t=>{alert(t)})}},data:()=>({u:at,joins:[]}),firestore(){return{joins:tt.collection("joins").where("class","==",this.$route.params.cid)}}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-container"},[t.u.data?s("div",{staticClass:"page"},[s("div",{staticClass:"close"},[s("span",{on:{click:function(e){t.$router.push("/u")}}},[t._v("X")])]),t._v(" "),s("div",[s("h2",[t._v("Roster")]),t._v(" "),t._l(t.joins,function(e,a){return s("div",{staticClass:"post-list"},[s("div",[t._v(t._s(e.uname)+" ("+t._s(e.role)+")")]),t._v(" "),s("div",[t._v(t._s(e.email))]),t._v(" "),s("div",{staticClass:"button",on:{click:function(s){t.remove(e.id)}}},[t._v("Remove from Class")])])})],2)]):t._e()])},staticRenderFns:[]};var B=s("VU/8")(I,M,!1,function(t){s("Lc99")},"data-v-7a932422",null).exports,U={name:"Roster",created:function(){document.title="Roster"},watch:{codes:function(t){console.log(t),t.length>0&&(this.code=t[0].id)}},data:()=>({u:at,codes:[],code:""}),firestore(){return{codes:tt.collection("studentCodes").where("classid","==",this.$route.params.cid)}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-container"},[t.u.data?s("div",{staticClass:"page"},[s("div",{staticClass:"close"},[s("span",{on:{click:function(e){t.$router.push("/u")}}},[t._v("X")])]),t._v(" "),s("div",[s("h2",[t._v("Student Code")]),t._v(" "),s("div",{staticClass:"big"},[t._v(t._s(t.code))])])]):t._e()])},staticRenderFns:[]};var z=s("VU/8")(U,R,!1,function(t){s("8hg6")},"data-v-639d0413",null).exports;a.a.use(o.a);var H=new o.a({mode:"history",routes:[{path:"/",name:"GalleryList",component:v,meta:{title:"iDEW Galleries"}},{path:"/new",name:"AdminGallery",component:L,meta:{title:"New Gallery"}},{path:"/groups",name:"GroupLists",component:D,meta:{title:"Manage Groups"}},{path:"/g/:slug/edit",name:"AdminGallery",component:L,meta:{title:"Manage Galleries"}},{path:"/u",name:"User",component:w,meta:{title:"User Profile"}},{path:"/roster/:cid",name:"Roster",component:B,meta:{title:"Roster"}},{path:"/code/:cid",name:"Code",component:z,meta:{title:"Student Code"}},{path:"/g/:slug",name:"Gallery",component:C,props:!0,meta:{title:"Gallery"}},{path:"/g/:slug/c/:cname",name:"Gallery",component:C,props:!0,meta:{title:"Gallery"}},{path:"/p/:gslug/:pid",name:"Post",component:$,props:!0,meta:{title:"Post"}},{path:"/np/:slug",name:"NewPost",component:A,props:!0,meta:{title:"New Post"}}]}),V=s("hnaQ"),O=s("yviF"),W=s.n(O),q=(s("881v"),s("cWbj"),s("dih4"),s("nKpR")),X=s.n(q),Y=s("H1si"),J=s.n(Y),Z=s("C/JF"),K=s("fhbW"),Q=s("1e6/");Z.c.add(K.b,K.c,K.j,K.e,K.h,K.g,K.f,K.a,K.i,K.d),a.a.component("font-awesome-icon",Q.a),a.a.use(V.a),W.a.initializeApp({apiKey:"AIzaSyA3jLSDKdZ5ib3uDpLBDDUuD2ZnJ0JawGQ",authDomain:"idew-2018.firebaseapp.com",databaseURL:"https://idew-2018.firebaseio.com",projectId:"idew-2018",storageBucket:"idew-2018.appspot.com",messagingSenderId:"259724907208"});const tt=W.a.firestore();e.db=tt;const et=W.a.firestore;e.fs=et;const st=W.a.storage().ref();e.storage=st;const at={signIn:function(){var t=new W.a.auth.GoogleAuthProvider;t.addScope("profile"),t.addScope("email"),t.setCustomParameters({prompt:"select_account"}),W.a.auth().signInWithRedirect(t).then(function(t){})},signOut:function(){W.a.auth().signOut()},data:{displayName:"Waiting on authentication ...",uid:""},posts:[],classes:[],comments:[],companies:[],unsubscribeUserPosts:function(){},unsubscribeClasses:function(){},unsubscribeComments:function(){},unsubscribeCompanies:function(){}};e.user=at;const it={processFile:function(t){return new Promise(function(e,s){var a={};if(t.type.startsWith("image/"))J()(t,function(s){s.toBlob(function(s){a.imageBlob=s,J()(t,function(t){t.toBlob(function(t){a.thumbnailBlob=t,it.getBase64(t).then(t=>{a.thumbnailSrc=t,e(a)})})},{maxWidth:400,minWidth:400,orientation:!0})})},{maxWidth:1600,minWidth:1600,orientation:!0});else if("application/pdf"==t.type){a.pdfBlob=t;var i=new FileReader;i.onloadend=function(){X.a.getDocument({data:i.result}).then(function(t){t.getPage(1).then(function(t){var s=t.getViewport(.5),i=document.createElement("canvas"),n=i.getContext("2d");i.height=s.height,i.width=s.width;var o={canvasContext:n,viewport:s};t.render(o).then(function(){i.toBlob(function(t){it.processFile(t).then(t=>{e(Object.assign(a,t))})})})})})},i.readAsBinaryString(a.pdfBlob)}})},getBase64:function(t){return new Promise((e,s)=>{if(t.size/1024/1024<4){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){e(a.result)},a.onerror=function(t){s(t)}}else alert("File to large."),s(error)})},randomString:function(t){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)e+=s.charAt(Math.floor(Math.random()*s.length));return e},slugify:function(t){const e="àáäâãåèéëêìíïîòóöôùúüûñçßÿœæŕśńṕẃǵǹḿǘẍźḧ·/_,:;",s=new RegExp(e.split("").join("|"),"g");return t.toString().toLowerCase().replace(/\s+/g,"-").replace(s,t=>"aaaaaaeeeeiiiioooouuuuncsyoarsnpwgnmuxzh------".charAt(e.indexOf(t))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},getGallery:function(t){return new Promise(function(e,s){tt.collection("galleries").where("slug","==",t).get().then(function(t){var s=[];t.forEach(function(t){var e=t.data();e.id=t.id,s.push(e)}),s.length>0?e(s[0]):e({})})})},addGallery:function(t){t.timestamp=et.FieldValue.serverTimestamp(),tt.collection("galleries").add(t).then(function(t){console.log("Document written with ID: ",t.id)}).catch(function(t){console.error("Error adding document: ",t)})},updateGallery:function(t,e){tt.collection("galleries").doc(e).update(t).then(function(t){console.log("Gallery updated")}).catch(function(t){console.error("Error adding document: ",t)})},deleteGallery:function(t){tt.collection("galleries").doc(t).delete().then(function(){console.log("Document successfully deleted!")}).catch(function(t){console.error("Error removing document: ",t)})}};e.utils=it,W.a.auth().onAuthStateChanged(function(t){at.unsubscribeUserPosts(),at.unsubscribeClasses(),at.unsubscribeComments(),at.unsubscribeCompanies(),at.unsubscribeUserPosts=function(){},at.unsubscribeClasses=function(){},at.unsubscribeComments=function(){},at.unsubscribeCompanies=function(){},at.posts=[],at.classes=[],at.comments=[],at.companies=[],at.data={displayName:"Guest",uid:""},t&&(at.data=t,at.unsubscribeUserPosts=tt.collection("posts").where("uid","==",at.data.uid).orderBy("timestamp","desc").onSnapshot(function(t){var e=[];t.forEach(function(t){var s=t.data();s.id=t.id,e.push(s)}),at.posts=e}),at.unsubscribeClasses=tt.collection("joins").where("uid","==",at.data.uid).onSnapshot(function(t){var e=[];t.forEach(function(t){tt.collection("classes").doc(t.data().class).get().then(function(s){var a={};a.id=s.id,a.role=t.data().role,a.name=s.data().name,a.jid=t.id,e.push(a)})}),at.classes=e}),at.unsubscribeComments=tt.collection("comments").where("uid","==",at.data.uid).orderBy("timestamp","desc").onSnapshot(function(t){var e=[];t.forEach(function(t){var s=t.data();s.id=t.id,e.push(s)}),at.comments=e}),at.unsubscribeCompanies=tt.collection("companyJoins").where("uid","==",at.data.uid).onSnapshot(function(t){var e=[];t.forEach(function(t){tt.collection("companies").doc(t.data().companyID).get().then(function(s){var a={role:t.data().role,name:s.data().name,jid:t.id};a.id=s.id,e.push(a)})}),at.companies=e}))},function(t){console.log(t)}),a.a.config.productionTip=!1,new a.a({el:"#app",router:H,components:{App:n},template:"<App/>"})},PTkZ:function(t,e){},SODp:function(t,e){},plwb:function(t,e){},tVsZ:function(t,e){},uORo:function(t,e){},uslO:function(t,e,s){var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return s(n(t))}function n(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.976613476d9cb5a82748.js.map